<ion-view class="self-exclusion">
  <ion-content has-bouncing="false" class="general-content">
    <div class="row">
      <div class="col">
        <h1 class="page-title">
          <span>
            {{ 'self-exclusion.self-exclusion' | translate }}
          </span>
        </h1>
      </div>
    </div>
    <form name="self_exclusion_form" ng-submit="vm.submit()">
      <div class="card">
        <div class="row">
          <div class="col">
            <div class="list">
              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.maximum-account-cash-balance' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.maximum-account-cash-balance' | translate }}" name="max_account_balance"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_balance"
                       ng-max="vm.limits.max_balance"
                       ng-min="1"
                       ng-required="vm.limits.max_balance ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.max-balance-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_account_balance.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_balance} }}
                </ng-message>
              </ng-message>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.daily-turnover-limit' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.daily-turnover-limit' | translate }}" name="max_daily_turnover"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_turnover"
                       ng-max="vm.limits.max_turnover"
                       ng-min="1"
                       ng-required="vm.limits.max_turnover ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.max-turnover-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_daily_turnover.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_turnover} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.daily-limit-on-losses' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.daily-limit-on-losses' | translate }}" name="daily_limit_on_losses"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_losses"
                       ng-max="vm.limits.max_losses"
                       ng-min="1"
                       ng-required="vm.limits.max_losses ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.max-losses-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.daily_limit_on_losses.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_losses} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.7-day-turnover-limit' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.7-day-turnover-limit' | translate }}" name="max_7_day_turnover_limit"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_7day_turnover"
                       ng-max="vm.limits.max_7day_turnover"
                       ng-min="1"
                       ng-required="vm.limits.max_7day_turnover ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.7-day-turnover-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_7_day_turnover_limit.$error" role="alert" class="error">
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_7day_turnover} }}
                </ng-message>
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.7-day-limit-on-losses' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.7-day-limit-on-losses' | translate }}" name="max_7_day_limit_on_losses"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_7day_losses"
                       ng-max="vm.limits.max_7day_losses"
                       ng-min="1"
                       ng-required="vm.limits.max_7day_losses ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.7-day-losses-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_7_day_limit_on_losses.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_7day_losses} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.30-day-turnover-limit' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.30-day-turnover-limit' | translate }}" name="max_30_day_turnover_limit"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_30day_turnover"
                       ng-max="vm.limits.max_30day_turnover"
                       ng-min="1"
                       ng-required="vm.limits.max_30day_turnover ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.30-day-turnover-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_30_day_turnover_limit.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_30day_turnover} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.30-day-limit-on-losses' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.30-day-limit-on-losses' | translate }}" name="max_30_day_limit_on_losses"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,20}$/"
                       ng-model="vm.data.max_30day_losses"
                       ng-max="vm.limits.max_30day_losses"
                       ng-min="1"
                       ng-required="vm.limits.max_30day_losses ? true : false"
                       step="1"
                       maxlength="20" />
              </label>
              <div class="hint"> {{ 'self-exclusion.30-day-losses-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.max_30_day_limit_on_losses.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "20"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_30day_losses} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.maximum-number-of-open-positions' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.maximum-number-of-open-positions' | translate }}" name="maximum_number_of_open_positions"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,4}$/"
                       ng-model="vm.data.max_open_bets"
                       ng-max="vm.limits.max_open_bets"
                       ng-min="1"
                       ng-required="vm.limits.max_open_bets ? true : false"
                       step="1"
                       maxlength="4" />
              </label>
              <ng-messages for="self_exclusion_form.maximum_number_of_open_positions.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "4"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_open_bets} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.session-duration-limit-in-minutes' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.session-duration-limit-in-minutes' | translate }}" name="session_duration_limit"
                       type="number"
                       bg-number
                       ng-pattern="/^\d{0,5}$/"
                       ng-model="vm.data.session_duration_limit"
                       ng-max="vm.limits.session_duration_limit || (vm.limits.session_duration_limit = 60480)"
                       ng-min="0",
                       ng-required="vm.limits.session_duration_limit ? true : false"
                       step="1"
                       maxlength="5"
                       required />
              </label>
              <div class="hint"> {{ 'self-exclusion.session-duration-hint' | translate }} </div>
              <ng-messages ng-if="self_exclusion_form.session_duration_limit.$dirty" for="self_exclusion_form.session_duration_limit.$error" role="alert" class="error">
                <ng-message when="pattern, number"> {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max: "5"} }} </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.session_duration_limit} }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.time-out-until' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.time-out-until' | translate }}"
                name="time_out_until"
                       type="datetime-local"
                       ng-model="vm.data.timeout_until"
                       min="{{ vm.minDate }}T00:00:00"
                       max="{{ vm.nextSixWeeks }}T00:00:00"
                       ng-min="vm.minDateTime"
                       ng-max="vm.nextSixWeeks + 'T00:00:00'" />
              </label>
              <div class="hint"> {{ 'self-exclusion.time-out-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.time_out_until.$error" role="alert" class="error">
                <ng-message when="min">
                  {{ 'self-exclusion.date-is-not-valid' | translate }}
                </ng-message>
                <ng-message when="max">
                  {{ 'self-exclusion.date-can-not-be-greater-than' | translate:{max: vm.nextSixWeeks}  }}
                </ng-message>
              </ng-messages>

              <label class="item item-input item-floating-label">
                <span class="input-label">
                  {{ 'self-exclusion.exclude-me-from-the-website-until' | translate }}
                </span>
                <input placeholder="{{ 'self-exclusion.exclude-me-from-the-website-until' | translate }}"
                name="exclude_me_until"
                       type="date"
                       ng-model="vm.data.exclude_until"
                       min="{{ vm.nextSixMonths }}" />
              </label>
              <div class="hint"> {{ 'self-exclusion.exclude-me-hint' | translate }} </div>
              <ng-messages for="self_exclusion_form.exclude_me_until.$error" role="alert" class="error">
                <ng-message when="min, max">
                  {{ 'self-exclusion.date-can-not-less-than' | translate : {max: vm.nextSixMonths} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col center">
          <button class="button button-positive ink"
                  type="submit"
                  ng-disabled="!self_exclusion_form.$valid || vm.disableUpdateButton" angular-ripple>
            {{ 'self-exclusion.update-settings' | translate }}
          </button>
        </div>
      </div>
    </form>
  </ion-content>
</ion-view>
